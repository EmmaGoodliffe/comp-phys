{"mappings":"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","sources":["./node_modules/@parcel/scope-hoisting/lib/helpers.js","./src/particles/Particle.ts","./src/particles/index.ts"],"sourcesContent":["function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n\nvar $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n","import p5 from \"p5\";\n\ninterface Inputs {\n  g: number;\n  G: number;\n  mouseMass: number;\n  attractors: Particle[];\n  widthToMassRatio: number;\n  lengthToAccelerationRatio: number;\n  maxSpeed: number;\n}\n\nexport default class Particle {\n  s: p5.Vector;\n  v: p5.Vector;\n  a: p5.Vector;\n  w: number;\n  hue: number;\n  arrow: Arrow;\n  highlight: boolean;\n  constructor(public _: p5, public m = 1) {\n    const x = _.random(1, _.width);\n    const y = _.random(1, _.height);\n    this.s = _.createVector(x, y);\n    this.v = _.createVector(0, 0);\n    this.a = _.createVector(0, 0);\n    this.w = m;\n    this.hue = Math.floor(_.random(0, 360));\n    this.arrow = new Arrow(_, this.s, this.a);\n    this.highlight = false;\n  }\n  applyForce(force: p5.Vector): void {\n    const a = p5.Vector.div(force, this.m);\n    this.a.add(a);\n  }\n  private bounce() {\n    const { _, s, v, w } = this;\n    const radius = w / 2;\n    if (s.x - radius <= 0 || s.x + radius >= _.width) {\n      v.x *= -1;\n    }\n    if (s.y - radius <= 0 || s.y + radius >= _.height) {\n      v.y *= -1;\n    }\n    this.s.x = _.constrain(this.s.x, radius, _.width - radius);\n    this.s.y = _.constrain(this.s.y, radius, _.height - radius);\n  }\n  private getGravitationalAttraction(\n    attractor: { s: p5.Vector; m: number },\n    G: number,\n  ) {\n    const displacement = p5.Vector.sub(attractor.s, this.s);\n    const distance = displacement.mag();\n    const magnitude = (G * attractor.m * this.m) / distance ** 2;\n    if (magnitude === Infinity || distance < 10) {\n      return false;\n    } else {\n      const forceAttractorOnParticle = displacement.setMag(magnitude);\n      return forceAttractorOnParticle;\n    }\n  }\n  update(inputs: Inputs): void {\n    const { _ } = this;\n    const { g, G } = inputs;\n    const forceEarthOnParticle = _.createVector(0, 1).setMag(this.m * g);\n    this.applyForce(forceEarthOnParticle);\n    const mouseS = _.createVector(_.mouseX, _.mouseY);\n    const forceMouseOnParticle = this.getGravitationalAttraction(\n      { s: mouseS, m: inputs.mouseMass },\n      G,\n    );\n    forceMouseOnParticle && this.applyForce(forceMouseOnParticle);\n    for (const attractor of inputs.attractors) {\n      const forceAttractorOnParticle = this.getGravitationalAttraction(\n        attractor,\n        G,\n      );\n      if (forceAttractorOnParticle) {\n        forceAttractorOnParticle.setMag(\n          _.constrain(forceAttractorOnParticle.mag(), -1, 1),\n        );\n        this.applyForce(forceAttractorOnParticle);\n      }\n    }\n    this.w = this.m * inputs.widthToMassRatio;\n    this.arrow = new Arrow(_, this.s, this.a);\n    this.v.add(this.a);\n    this.bounce();\n    if (this.v.mag() > inputs.maxSpeed) {\n      this.v.setMag(inputs.maxSpeed);\n      this.highlight = true;\n    } else {\n      this.highlight = false;\n    }\n    // this.v.setMag(_.constrain(this.v.mag(), 0, inputs.maxSpeed));\n    this.s.add(this.v);\n    this.a = _.createVector(0, 0);\n  }\n  draw(): void {\n    const { _, s, w } = this;\n    const hue = this.highlight ? 0.1 : this.hue;\n    const strokeCol = _.color(`hsl(${hue}, 100%, 50%)`);\n    _.stroke(strokeCol);\n    _.strokeWeight(2);\n    const fillCol = _.color(`hsla(${hue}, 100%, 50%, 0.5)`);\n    _.fill(fillCol);\n    _.circle(s.x, s.y, w);\n    _.strokeWeight(3);\n    this.arrow.draw();\n  }\n}\n\nclass Arrow {\n  line: p5.Vector;\n  tips: [p5.Vector, p5.Vector];\n  constructor(public _: p5, public s: p5.Vector, a: p5.Vector) {\n    this.line = a.copy().setMag(20);\n    this.tips = [this.createTip(1), this.createTip(-1)];\n  }\n  createTip(direction: 1 | -1) {\n    const { _ } = this;\n    const baseR = this.line.mag();\n    const baseTheta = _.atan(this.line.y / this.line.x);\n    const thetaAdjustment = 45 * direction;\n    let theta = baseTheta + 180 + thetaAdjustment;\n    if (this.line.x < 0) {\n      theta += 180;\n    }\n    const r = baseR / 4;\n    const x = r * _.cos(theta);\n    const y = r * _.sin(theta);\n    const tip = _.createVector(x, y);\n    return tip;\n  }\n  draw() {\n    const { _, s } = this;\n    const absLine = p5.Vector.add(s, this.line);\n    _.line(s.x, s.y, absLine.x, absLine.y);\n    for (const tip of this.tips) {\n      _.line(absLine.x, absLine.y, absLine.x + tip.x, absLine.y + tip.y);\n    }\n  }\n}\n","import p5 from \"p5\";\nimport Particle from \"./Particle\";\n\nconst _ = new p5(() => {});\n\nconst particles: Particle[] = [];\n\n_.setup = () => {\n  _.createCanvas(600, 600);\n  _.angleMode(\"degrees\");\n  for (let i = 0; i < 12; i++) {\n    particles.push(new Particle(_, Math.random() * 10));\n  }\n};\n\n_.draw = () => {\n  _.background(32);\n  for (const p of particles) {\n    p.update({\n      G: 10,\n      g: 0,\n      mouseMass: 0,\n      attractors: particles,\n      widthToMassRatio: 10,\n      lengthToAccelerationRatio: 10 ** 5,\n      maxSpeed: 3,\n    });\n    p.draw();\n  }\n};\n"],"names":["a","__esModule","default","Particle","_","m","arguments","length","undefined","$e5666e0612026a821ae16b5556aba4$var$_classCallCheck","this","x","random","width","y","height","s","createVector","v","w","hue","Math","floor","arrow","Arrow","highlight","force","$d8081407ea2ad5e9b9b854995b56c8d$$interop$default","Vector","div","add","radius","constrain","attractor","G","displacement","sub","distance","mag","magnitude","pow","Infinity","setMag","inputs","g","forceEarthOnParticle","applyForce","mouseS","mouseX","mouseY","forceMouseOnParticle","getGravitationalAttraction","mouseMass","_step","_iterator","$e5666e0612026a821ae16b5556aba4$var$_createForOfIteratorHelper","attractors","n","done","value","forceAttractorOnParticle","err","e","f","widthToMassRatio","bounce","maxSpeed","strokeCol","color","concat","stroke","strokeWeight","fillCol","fill","circle","draw","line","copy","tips","createTip","direction","baseR","theta","atan","r","cos","sin","absLine","_step2","_iterator2","tip","particles","setup","createCanvas","angleMode","i","push","$e5666e0612026a821ae16b5556aba4$export$default","background","$f5f02ad5dee84783116497cdac1a0$var$_createForOfIteratorHelper","p","update","lengthToAccelerationRatio"],"version":3,"file":"index.eb9b0f69.js.map"}