{"mappings":"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","sources":["./node_modules/@parcel/scope-hoisting/lib/helpers.js","./src/particles/Particle.ts","./src/particles/index.ts"],"sourcesContent":["function $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n\nvar $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n","import p5 from \"p5\";\n\ninterface Inputs {\n  g: number;\n  G: number;\n  mouseMass: number;\n  attractors: Particle[];\n  widthToMassRatio: number;\n  lengthToAccelerationRatio: number;\n}\n\nexport default class Particle {\n  s: p5.Vector;\n  v: p5.Vector;\n  a: p5.Vector;\n  w: number;\n  hue: number;\n  arrow: Arrow;\n  constructor(public _: p5, public m = 1) {\n    const x = _.random(1, _.width);\n    const y = _.random(1, _.height);\n    this.s = _.createVector(x, y);\n    this.v = _.createVector(0, 0);\n    this.a = _.createVector(0, 0);\n    this.w = m;\n    this.hue = 192;\n    this.arrow = new Arrow(_, this.s, this.a);\n  }\n  applyForce(force: p5.Vector): void {\n    const a = p5.Vector.div(force, this.m);\n    this.a.add(a);\n  }\n  private constrain() {\n    const { _, s } = this;\n    s.x = _.constrain(s.x, 0, _.width);\n    s.y = _.constrain(s.y, 0, _.height);\n  }\n  private bounce() {\n    const { _, s, v, w } = this;\n    const radius = w / 2;\n    if (s.x - radius <= 0 || s.x + radius >= _.width) {\n      v.x *= -1;\n    }\n    if (s.y - radius <= 0 || s.y + radius >= _.height) {\n      v.y *= -1;\n    }\n  }\n  private getGravitationalAttraction(\n    attractor: { s: p5.Vector; m: number },\n    G: number,\n  ) {\n    const displacement = p5.Vector.sub(attractor.s, this.s);\n    const distance = displacement.mag();\n    const magnitude = (G * attractor.m * this.m) / distance ** 2;\n    if (magnitude === Infinity || distance < 10) {\n      return false;\n    } else {\n      const forceAttractorOnParticle = displacement.setMag(magnitude);\n      return forceAttractorOnParticle;\n    }\n  }\n  update(inputs: Inputs): void {\n    const { _ } = this;\n    const { g, G } = inputs;\n    const forceEarthOnParticle = _.createVector(0, 1).setMag(this.m * g);\n    this.applyForce(forceEarthOnParticle);\n    const mouseS = _.createVector(_.mouseX, _.mouseY);\n    const forceMouseOnParticle = this.getGravitationalAttraction(\n      { s: mouseS, m: inputs.mouseMass },\n      G,\n    );\n    forceMouseOnParticle && this.applyForce(forceMouseOnParticle);\n    for (const attractor of inputs.attractors) {\n      const forceAttractorOnParticle = this.getGravitationalAttraction(\n        attractor,\n        G,\n      );\n      if (forceAttractorOnParticle) {\n        forceAttractorOnParticle.setMag(\n          _.constrain(forceAttractorOnParticle.mag(), -1, 1),\n        );\n        this.applyForce(forceAttractorOnParticle);\n      }\n    }\n    this.w = this.m * inputs.widthToMassRatio;\n    this.arrow = new Arrow(_, this.s, this.a);\n    this.v.add(this.a);\n    this.bounce();\n    this.v.setMag(_.constrain(this.v.mag(), 0, 3));\n    this.s.add(this.v);\n    this.a = _.createVector(0, 0);\n  }\n  draw(): void {\n    const { _, s, w } = this;\n    const strokeCol = _.color(`hsl(${this.hue}, 100%, 50%)`);\n    _.stroke(strokeCol);\n    _.strokeWeight(2);\n    const fillCol = _.color(`hsla(${this.hue}, 100%, 50%, 0.5)`);\n    _.fill(fillCol);\n    _.circle(s.x, s.y, w);\n    _.strokeWeight(3);\n    this.arrow.draw();\n  }\n}\n\nclass Arrow {\n  line: p5.Vector;\n  tips: [p5.Vector, p5.Vector];\n  constructor(public _: p5, public s: p5.Vector, a: p5.Vector) {\n    this.line = a.copy().setMag(20);\n    this.tips = [this.createTip(1), this.createTip(-1)];\n  }\n  createTip(direction: 1 | -1) {\n    const { _ } = this;\n    const baseR = this.line.mag();\n    const baseTheta = _.atan(this.line.y / this.line.x);\n    const thetaAdjustment = 45 * direction;\n    let theta = baseTheta + 180 + thetaAdjustment;\n    if (this.line.x < 0) {\n      theta += 180;\n    }\n    const r = baseR / 4;\n    const x = r * _.cos(theta);\n    const y = r * _.sin(theta);\n    const tip = _.createVector(x, y);\n    return tip;\n  }\n  draw() {\n    const { _, s } = this;\n    const absLine = p5.Vector.add(s, this.line);\n    _.line(s.x, s.y, absLine.x, absLine.y);\n    for (const tip of this.tips) {\n      _.line(absLine.x, absLine.y, absLine.x + tip.x, absLine.y + tip.y);\n    }\n  }\n}\n","import p5 from \"p5\";\nimport Particle from \"./Particle\";\n\nconst _ = new p5(() => {});\n\nconst particles: Particle[] = [];\n\n_.setup = () => {\n  _.createCanvas(400, 400);\n  _.angleMode(\"degrees\");\n  for (let i = 0; i < 3; i++) {\n    particles.push(new Particle(_, 1));\n    particles[i].hue = Math.floor(_.random(0, 360));\n  }\n};\n\n_.draw = () => {\n  _.background(32);\n  for (const p of particles) {\n    p.update({\n      G: 10,\n      g: 0,\n      mouseMass: 2,\n      attractors: particles,\n      widthToMassRatio: 10,\n      lengthToAccelerationRatio: 10 ** 5,\n    });\n    p.draw();\n  }\n};\n"],"names":["a","__esModule","default","Particle","_","m","arguments","length","undefined","$e5666e0612026a821ae16b5556aba4$var$_classCallCheck","this","x","random","width","y","height","s","createVector","v","w","hue","arrow","Arrow","force","$d8081407ea2ad5e9b9b854995b56c8d$$interop$default","Vector","div","add","constrain","radius","attractor","G","displacement","sub","distance","mag","magnitude","Math","pow","Infinity","setMag","inputs","g","forceEarthOnParticle","applyForce","mouseS","mouseX","mouseY","forceMouseOnParticle","getGravitationalAttraction","mouseMass","_step","_iterator","$e5666e0612026a821ae16b5556aba4$var$_createForOfIteratorHelper","attractors","n","done","value","forceAttractorOnParticle","err","e","f","widthToMassRatio","bounce","strokeCol","color","concat","stroke","strokeWeight","fillCol","fill","circle","draw","line","copy","tips","createTip","direction","baseR","theta","atan","r","cos","sin","absLine","_step2","_iterator2","tip","particles","setup","createCanvas","angleMode","i","push","$e5666e0612026a821ae16b5556aba4$export$default","floor","background","$f5f02ad5dee84783116497cdac1a0$var$_createForOfIteratorHelper","p","update","lengthToAccelerationRatio"],"version":3,"file":"index.fb54e90f.js.map"}